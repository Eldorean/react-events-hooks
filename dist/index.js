"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var EventSubject=function(){function e(t){var n=this;_classCallCheck(this,e),this._Observers=[],this.Attach=function(e){return n._Observers.push(e)},this.Detach=function(e){var t=n._Observers.indexOf(e);-1!==t&&n._Observers.splice(t,1)},this.Notify=function(e){return n._Observers.forEach(function(t){return t.Update(e)})},this._Tag=t}return _createClass(e,[{key:"Tag",get:function(){return this._Tag}},{key:"Count",get:function(){return this._Observers.length}}]),e}();EventSubject.New=function(e){var t=SubjectRegistry.Instance;return t.Exists(e)?t.Find(e):t.Add(e,new EventSubject(e))};var SubjectRegistry=function(){function e(){var t=this;_classCallCheck(this,e),this._Registry={},this.Exists=function(e){return!!t._Registry[e]},this.Add=function(e,n){if(t.Exists(e))throw new Error("tag ".concat(e," already exists"));return t._Registry[e]=n,n},this.Find=function(e){if(!t.Exists(e))throw new Error("tag ".concat(e," is unknown"));return t._Registry[e]},this.FindOrCreate=function(e){return EventSubject.New(e)},this.Destroy=function(e){delete t._Registry[e]}}return _createClass(e,null,[{key:"Instance",get:function(){return this._Instance?this._Instance:this._Instance=new e}}]),e}(),EventObserver=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.Destroy=function(){return SubjectRegistry.Instance.Find(r._Tag).Detach(r)},this.Update=n,this._Tag=t}return _createClass(e,null,[{key:"New",value:function(t,n){var r=[],s=(r=r.concat(t)).map(function(t){var r=new e(t,function(e){return n(e)}),s=SubjectRegistry.Instance.FindOrCreate(t);return{observer:r,attach:function(){return s.Attach(r)}}});return s.forEach(function(e){return(0,e.attach)()}),Array.isArray(t)?s.map(function(e){return e.observer}):s[0].observer}}]),e}(),subjectRegistry=SubjectRegistry.Instance,useNewEvent=function(e){return subjectRegistry.FindOrCreate(e).Notify},useEvent=function(e,t){var n=[];n=n.concat(e);react.useEffect(function(){var e=n.map(function(e){var n=EventObserver.New(e,function(e){return t(e)});return{detach:function(){return n.Destroy()}}});return function(){return e.forEach(function(e){return(0,e.detach)()})}})};exports.Emitter=EventSubject,exports.Listener=EventObserver,exports.useEmitter=useNewEvent,exports.useListener=useEvent;
//# sourceMappingURL=index.js.map
