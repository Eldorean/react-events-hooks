import{useEffect as t}from"react";function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function e(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}var i=function(){function t(r){var e=this;n(this,t),this._Observers=[],this.Attach=function(t){return e._Observers.push(t)},this.Detach=function(t){var n=e._Observers.indexOf(t);-1!==n&&e._Observers.splice(n,1)},this.Notify=function(t){return e._Observers.forEach(function(n){return n.Update(t)})},this._Tag=r}return e(t,[{key:"Tag",get:function(){return this._Tag}},{key:"Count",get:function(){return this._Observers.length}}]),t}();i.New=function(t){var n=s.Instance;return n.Exists(t)?n.Find(t):n.Add(t,new i(t))};var s=function(){function t(){var r=this;n(this,t),this._Registry={},this.Exists=function(t){return!!r._Registry[t]},this.Add=function(t,n){if(r.Exists(t))throw new Error("tag ".concat(t," already exists"));return r._Registry[t]=n,n},this.Find=function(t){if(!r.Exists(t))throw new Error("tag ".concat(t," is unknown"));return r._Registry[t]},this.FindOrCreate=function(t){return i.New(t)},this.Destroy=function(t){delete r._Registry[t]}}return e(t,null,[{key:"Instance",get:function(){return this._Instance?this._Instance:this._Instance=new t}}]),t}(),u=function(){function t(r,e){var i=this;n(this,t),this.Destroy=function(){return s.Instance.Find(i._Tag).Detach(i)},this.Update=e,this._Tag=r}return e(t,null,[{key:"New",value:function(n,r){var e=[],i=(e=e.concat(n)).map(function(n){var e=new t(n,function(t){return r(t)}),i=s.Instance.FindOrCreate(n);return{observer:e,attach:function(){return i.Attach(e)}}});return i.forEach(function(t){return(0,t.attach)()}),Array.isArray(n)?i.map(function(t){return t.observer}):i[0].observer}}]),t}(),a=s.Instance,c=function(t){return a.FindOrCreate(t).Notify},o=function(n,r){var e=[];e=e.concat(n);t(function(){var t=e.map(function(t){var n=u.New(t,function(t){return r(t)});return{detach:function(){return n.Destroy()}}});return function(){return t.forEach(function(t){return(0,t.detach)()})}})};export{i as Emitter,u as Listener,c as useEmitter,o as useListener};
//# sourceMappingURL=index.es.js.map
